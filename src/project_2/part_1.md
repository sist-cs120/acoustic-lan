## From Wireless to Wire

In this part, your task is to set up the wired link between two nodes. This task is almost the same as [Part 3](/project_1/part_3.md) of Project 1, but we expect higher performance (>5kbps). No points are given for this part. Instead, completing this part is an explicit requirement for the following parts.

The main purpose of moving from wireless link to wired link is to reduce the heterogeneity and complexity in acoustic hardware, e.g., ringing effect from mechanical vibration, distortions from nonlinear amplifiers, uneven response, echos, etc. The method to establish a wired link between two nodes is connecting their 3.5mm analog audio interfaces, e.g., connecting the MIC port to the Speaker port (See the red line in figure). Note that the signal flowing between the two ports is no longer an acoustic signal. It is an electric wave generated by the DAC.

The electric signal output from the speaker port is normally used to stimulate the mechanical hardware, e.g., the speaker, to generate sound. On the other hand, the ADC in the MIC port will transform any the input electric signal into digital samples, no matter the signal is generated by a DAC from other device (red) or a microphone (black). Generally speaking, through the wired connection between DAC and ADC, the received signal contains much fewer distortions than the signal in Project1. Your code of Project1 should work seamlessly and very likely much better in the wired situation.

![Wired Link](/media/wire_connection.png)

**Frame Format**. In order to support multiple nodes, each node must have a unique destination identifier, which contributes the destination and source address in MAC frames. Using 8 bits for each address field is suggested. A type field is very useful for differentiating different kinds of frames, e.g., ACKs and normal data frames. Using 4 bits for type field is suggested. Finally, the maximum MAC payload must be limited, otherwise, the network may have large delay (see Part5).

![Frame Format](/media/mac_frame.png)


### Tips:
- You are recommended to unplug the chargers/power adapters of your devices when doing wired experiments. The reason is that different AC-to-DC adapters (especially the ones without ground plugin) may have different voltages of their 'ground', so do the 'ground' of the charging devices. When interconnecting two devices with wires, they may have different 'ground'. In some cases, the problem just results in biased DC levels in the received signal from connected devices. Sometimes it may bring harmful damages. If you have to connect two devices with different 'ground' (e.g., a charging laptop and a desktop), you should be very careful.

- You can use the audio card of your own devices. Sometime they have better performance (in terms of the quality of the generated/received signal) than the offered ones.

- In some laptops and smartphones, the MIC in and speaker ports are combined into a single port, you may need an adapter to split them.

- The throughput can be increased by modifying your physical layer (PHY) of project 1
    - e.g., decrease the time for each symbol. You can also develop a new PHY suitable for the wired situation.
    - You can design shorter preamble to reduce the header overhead.
    - In project 1, we use carrier wave to convey information over the air wirelessly. In project 2, it is not necessary to so. You can directly use line code and transmit the baseband signal in the wire, which might be more efficient.
